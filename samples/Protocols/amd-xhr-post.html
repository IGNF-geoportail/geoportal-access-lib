<!DOCTYPE html>
<html>
    <head>
        <script src="../../lib/external/require.js"></script>
        <script>
            /* global requirejs */
            requirejs.config({
                'baseUrl' : "../../src/",
                'paths': {
                    // lib external
                    'log4js' : "../lib/external/woodman/woodman-amd",
                    'promise': '../lib/external/promise',
                    // config du logger
                    "logger-cfg" : "Utils/Logger.cfg"
                }
            });

            requirejs(['Protocols/XHR'],
                function (XHR) {

                    var options_post = {
                        url       : 'http://localhost/proxy/php/proxy.php?url=http%3A%2F%2Fwxs.ign.fr%2Fjhyvi0fgmnuxvfv0zjzorvdn%2Fgeoportail%2Fols%3Fgp-access-lib%3D__GPVERSION__%26',
                        method    : 'POST',
                        format    : null, // 'xml', 'json' ou 'text' (= null)
                        content   : "application/xml",
                        headers   : {
                          "Referer" : "http://localhost"
                        },
                        data      : "<?xml version=\"1.0\" encoding=\"UTF-8\"?><xls:XLS version=\"1.2\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xls=\"http://www.opengis.net/xls\" xmlns:gml=\"http://www.opengis.net/gml\" xsi:schemaLocation=\"http://www.opengis.net/xls http://schemas.opengis.net/ols/1.2/olsAll.xsd\"><xls:RequestHeader srsName=\"EPSG:4326\"/><xls:Request maximumResponses=\"25\" methodName=\"GeocodeRequest\" requestID=\"ef16dc49-394e-4fe7-9474-9d65d601ca0c\" version=\"1.2\"><xls:GeocodeRequest returnFreeForm=\"false\"><xls:Address countryCode=\"PositionOfInterest\"><xls:StreetAddress></xls:StreetAddress><xls:Place type=\"Departement\">94</xls:Place><xls:Place type=\"Municipality\">Saint-Mand√©e</xls:Place></xls:Address></xls:GeocodeRequest></xls:Request></xls:XLS>",
                        onResponse : function (response) {
                            console.log('Reponse :', response);
                        },
                        onFailure : function (error) {
                            console.log('Erreur :', error);
                        },
                        onTimeOut : function () {}
                    };

                    XHR.call(options_post);

            });
            </script>
    </head>
    <body>
        <h1>Utilisation des modules natifs AMD sur les protocoles</h1>
        <p>exemple mock avec Mockable sur <a href="https://www.mockable.io/">https://www.mockable.io/</a></p>
        <span>(Ouvrir la console)</span>
    </body>
</html>
