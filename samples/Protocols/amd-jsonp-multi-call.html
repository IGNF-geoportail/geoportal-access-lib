<!DOCTYPE html>
<html>
    <head>
        <script src="../../lib/external/require.js"></script>
        <script>
          function callback_3 (data) {
            console.log('Reponse 3:', data);
          }
        </script>

        <script>
            /* global requirejs */
            requirejs.config({
                'baseUrl' : "../../src/",
                'paths': {
                    // lib external
                    'log4js' : "../node_modules/woodman/dist/woodman-amd",
                    // config du logger
                    "logger-cfg" : "Utils/Logger.cfg"
                }
            });

            requirejs(['Protocols/JSONP'],
                function (JSONP) {

                  JSONP.call({
                    url : 'fixtures/callback-1.js',
                    callbackSuffix : "_1",
                    onResponse : function (response) {
                      console.log('Reponse 1:', response);
                    },
                    onFailure : function (error) {
                      console.log('Erreur 1:', error);
                    }
                  });

                  JSONP.call({
                    url : 'fixtures/callback-2.js',
                    callbackSuffix : "",
                    onResponse : function (response) {
                      console.log('Reponse 2:', response);
                    },
                    onFailure : function (error) {
                      console.log('Erreur 2:', error);
                    }
                  });

                  JSONP.call({
                    url : 'fixtures/callback-3.js',
                    callbackName : "callback_3",
                    onResponse : function (response) {}, // FIXME
                    onFailure : function (error) {
                      console.log('Erreur 3:', error);
                    }
                  });

            });
            </script>

    </head>
    <body>
        <h1>Utilisation des modules natifs AMD sur les protocoles</h1>
        <p>exemple mock avec Mockable sur <a href="https://www.mockable.io/">https://www.mockable.io/</a></p>
        <span>(Ouvrir la console)</span>
    </body>
</html>
